#!/usr/bin/env python3
"""
구구단 출력 스크립트 (주석 추가 버전)

이 스크립트는 구구단(1단부터 9단까지)을 출력합니다. 간단한 커맨드라인
인터페이스를 제공하며, 인자로 정수를 주면 해당 단만 출력합니다.

기본 사용법:
  - 전체 구구단 출력: `python gugudan.py`
  - 특정 단 출력:     `python gugudan.py 3`  # 3단만 출력

파일 구조 요약:
  - `print_table(n)`: 1개의 단(n)을 출력하는 헬퍼 함수
  - `print_all()`: 1~9단 전체를 출력
  - `main()`: 커맨드라인 인자를 해석하여 적절한 동작을 수행

설계 의도:
  - 함수는 한 가지 책임만 가지도록 작게 유지하여 재사용성과 테스트를
    용이하게 했습니다.
  - 사용자 입력(커맨드라인)을 검증하여 잘못된 입력에 대해 친절한
    메시지를 출력합니다.

이 파일은 교육용으로 간단하고 명확한 구조를 목표로 합니다.
"""

import sys


def print_table(n: int) -> None:
    """주어진 정수 `n`에 대해 1부터 9까지 곱셈 결과를 한 줄씩 출력합니다.

    매개변수:
    - n (int): 출력할 단의 숫자. 보통 1 <= n <= 9 범위를 기대합니다.

    예:
    >>> print_table(3)
    3 x 1 = 3
    3 x 2 = 6
    ...
    """
    # 1부터 9까지 반복하면서 각 곱셈 결과를 출력
    for i in range(1, 10):
        # f-string을 사용해 사람이 읽기 쉬운 형식으로 출력
        print(f"{n} x {i} = {n * i}")


def print_all() -> None:
    """1단부터 9단까지 순서대로 출력합니다.

    각 단의 시작 부분에 구분자(예: '--- 2단 ---')를 출력하여 가독성을
    높이고, 단과 단 사이에는 빈 줄을 넣습니다.
    """
    for n in range(1, 10):
        # 단 제목 출력
        print(f"--- {n}단 ---")
        # 해당 단의 곱셈표 출력
        print_table(n)
        # 단 사이의 여백
        print()


def main() -> None:
    """명령행 인자를 처리하고 적절한 출력 함수를 호출합니다.

    동작:
    - 인자가 없으면 `print_all()`을 호출하여 전체 구구단을 출력합니다.
    - 인자가 하나이고 정수(1~9)이면 `print_table(n)`을 호출하여 해당 단을
      출력합니다.
    - 그 외(정수가 아니거나 범위를 벗어남)에는 사용자에게 오류 메시지를
      출력합니다.
    """
    # sys.argv는 스크립트명과 인자를 포함한 리스트입니다.
    # 예: ['gugudan.py', '3']
    if len(sys.argv) == 2:
        # 사용자로부터 단 번호를 하나 받은 경우
        try:
            # 입력값을 정수로 변환 시도
            n = int(sys.argv[1])
            # 실사용 범위(1~9)인지 확인
            if 1 <= n <= 9:
                print_table(n)
            else:
                # 범위를 벗어날 경우 사용자가 이해하기 쉬운 메시지 출력
                print("1부터 9까지의 정수를 입력하세요.")
        except ValueError:
            # 정수 변환에 실패한 경우
            print("숫자를 입력하세요.")
    else:
        # 인자를 주지 않았거나 인자가 여러 개인 경우 전체 출력
        print_all()


if __name__ == "__main__":
    # 스크립트가 직접 실행될 때만 main()을 호출합니다. 이 파일을
    # 다른 모듈에서 import하면 main()은 자동으로 실행되지 않습니다.
    main()
